{"generator":"Code Snippets v2.14.0","date_created":"2020-03-30 18:33","snippets":[{"name":"WordPress: Remove Yoast SEO canonical URL for Facebook","tags":["wordpress","performance","yoast","seo","canonical","facebook"],"scope":"global","code":"add_filter('wpseo_canonical', 'remove_canonical_facebook_crawler', 10, 3);\n\nfunction remove_canonical_facebook_crawler($canonical) {\n    \/\/ Don't send a custom Canonical URL to the Facebook crawler\n\n    if((strpos($_SERVER[\"HTTP_USER_AGENT\"], \"facebookexternalhit\/\") !== false || strpos($_SERVER[\"HTTP_USER_AGENT\"], \"Facebot\") !== false) && is_singular()) {\n        \/\/ Find and return the original permalink canonical URL\n        $obj       = get_queried_object();\n        $canonical = get_permalink( $obj->ID );\n        return $canonical;\n    }\n\n    return $canonical;\n}","priority":"10"}]}