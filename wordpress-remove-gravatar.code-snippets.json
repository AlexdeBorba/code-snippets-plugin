{"generator":"Code Snippets v2.14.0","date_created":"2020-03-27 17:52","snippets":[{"name":"WordPress: Remove Gravatar","tags":["wordpress","performance","gravatar"],"scope":"global","code":"function bp_remove_gravatar ($image, $params, $item_id, $avatar_dir, $css_id, $html_width, $html_height, $avatar_folder_url, $avatar_folder_dir) {\n \n\t$default = get_stylesheet_directory_uri() .'\/images\/avatar.jpg';\n \n\tif( $image && strpos( $image, \"gravatar.com\" ) ){ \n \n\t\treturn '<img src=\"' . $default . '\" alt=\"avatar\" class=\"avatar\" ' . $html_width . $html_height . ' \/>';\n\t} else {\n\t\treturn $image;\n \n\t}\n \n}\nadd_filter('bp_core_fetch_avatar', 'bp_remove_gravatar', 1, 9 );\n \nfunction remove_gravatar ($avatar, $id_or_email, $size, $default, $alt) {\n \n\t$default = get_stylesheet_directory_uri() .'\/images\/avatar.jpg';\n\treturn \"<img alt='{$alt}' src='{$default}' class='avatar avatar-{$size} photo avatar-default' height='{$size}' width='{$size}' \/>\";\n}\n \nadd_filter('get_avatar', 'remove_gravatar', 1, 5);\n \nfunction bp_remove_signup_gravatar ($image) {\n \n\t$default = get_stylesheet_directory_uri() .'\/images\/avatar.png';\n \n\tif( $image && strpos( $image, \"gravatar.com\" ) ){ \n \n\t\treturn '<img src=\"' . $default . '\" alt=\"avatar\" class=\"avatar\" width=\"60\" height=\"60\" \/>';\n\t} else {\n\t\treturn $image;\n\t}\n \n}\nadd_filter('bp_get_signup_avatar', 'bp_remove_signup_gravatar', 1, 1 );","priority":"10"}]}