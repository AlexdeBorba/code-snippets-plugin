{"generator":"Code Snippets v2.14.0","date_created":"2020-03-23 00:22","snippets":[{"name":"WordPress: Defer JavaScript load","tags":["wordpress","performance","javascript","defer"],"scope":"front-end","code":"\/*Function to defer load scripts*\/\nfunction js_async_attr($tag){\n\n# Do not add defer or async attribute to these scripts\n$scripts_to_exclude = array('script1.js', 'script2.js', 'script3.js');\n\nforeach($scripts_to_exclude as $exclude_script){\n if(true == strpos($tag, $exclude_script ) )\n return $tag; \n}\n\n# Defer or async all remaining scripts not excluded above\nreturn str_replace( ' src', ' defer=\"defer\" src', $tag );\n}\nadd_filter( 'script_loader_tag', 'js_async_attr', 10 );","priority":"10"}]}