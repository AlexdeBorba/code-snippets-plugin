{"generator":"Code Snippets v2.14.0","date_created":"2020-03-24 17:26","snippets":[{"name":"WooCommerce: Dynamically change the order date on status change","tags":["woocommerce","order","status"],"scope":"admin","code":"add_action( 'woocommerce_loaded', 'wc_custom_loaded' );\n\nfunction wc_custom_loaded() {\n\t$old_statuses = array(\n\t\t'failed',\n\t\t\/\/uncomment any of the below statuses to include those statuses\n\t\t\/\/'pending',\n\t\t\/\/'processing',\n\t\t\/\/'on-hold',\n\t\t\/\/'cancelled',\n\t\t\/\/'refunded'\n\t);\n\tforeach ( $old_statuses as $old_status ) {\n\t\tadd_action( 'woocommerce_order_status_' . $old_status . '_to_completed', 'wc_custom_change_posted_date', 99, 1 );\n\t}\n}\n\nfunction wc_custom_change_posted_date( $order_id ) {\n\t$order = wc_get_order( $order_id );\n\t$args = array(\n\t\t'post_id' => $order_id,\n\t\t\/\/wp_insert_post (called by wp_update_post) will set the date to \"now\" if `post_date` is empty, likewise with `post_date_gmt`\n\t\t'post_date' => '',\n\t\t'post_date_gmt' => '',\n\t);\n\twp_update_post( $args );\n}","priority":"10"}]}