{"generator":"Code Snippets v2.14.0","date_created":"2020-03-23 00:13","snippets":[{"name":"WordPress: Custom timeout values for HTTP requests","tags":["wordpress","HTTPS","timeout","requests"],"scope":"admin","code":"\/\/ Setting a custom timeout value for cURL. Using a high value for priority to ensure the function runs after any other added to the same action hook.\nadd_action('http_api_curl', 'sar_custom_curl_timeout', 9999, 1);\nfunction sar_custom_curl_timeout( $handle ){\n\tcurl_setopt( $handle, CURLOPT_CONNECTTIMEOUT, 15 );\n\tcurl_setopt( $handle, CURLOPT_TIMEOUT, 15 );\n}\n\/\/ Setting custom timeout for the HTTP request\nadd_filter( 'http_request_timeout', 'sar_custom_http_request_timeout', 9999 );\nfunction sar_custom_http_request_timeout( $timeout_value ) {\n\treturn 15;\n}\n\/\/ Setting custom timeout in HTTP request args\nadd_filter('http_request_args', 'sar_custom_http_request_args', 9999, 1);\nfunction sar_custom_http_request_args( $r ){\n\t$r['timeout'] = 15;\n\treturn $r;\n}","priority":"10"}]}