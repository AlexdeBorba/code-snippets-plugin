{"generator":"Code Snippets v2.14.0","date_created":"2020-03-22 16:52","snippets":[{"name":"Disables oEmbeds","desc":"Disables WordPress oEmbeds","tags":["wordpress","code-snippets-plugin","oembeds"],"scope":"front-end","code":" function disable_embeds_code_init() {\n\n     \/\/ Remove the REST API endpoint\n     remove_action('rest_api_init', 'wp_oembed_register_route');\n\n     \/\/ Turn off oEmbed auto discovery\n     add_filter('embed_oembed_discover', '__return_false');\n\n     \/\/ Do not filter oEmbed results\n     remove_filter('oembed_dataparse', 'wp_filter_oembed_result', 10);\n\n     \/\/ Remove oEmbed discovery links\n     remove_action('wp_head', 'wp_oembed_add_discovery_links');\n\n     \/\/ Remove oEmbed-specific JavaScript from the front-end and back-end\n     remove_action('wp_head', 'wp_oembed_add_host_js');\n     add_filter('tiny_mce_plugins', 'disable_embeds_tiny_mce_plugin');\n\n     \/\/ Remove all embeds rewrite rules\n     add_filter('rewrite_rules_array', 'disable_embeds_rewrites');\n\n     \/\/ Remove filter of the oEmbed result before any HTTP requests are made\n     remove_filter('pre_oembed_result', 'wp_filter_pre_oembed_result', 10);\n }\n add_action('init', 'disable_embeds_code_init', 9999);\n\n function disable_embeds_tiny_mce_plugin($plugins) {\n     return array_diff($plugins, array('wpembed'));\n }\n\n function disable_embeds_rewrites($rules) {\n     foreach($rules as $rule => $rewrite) {\n         if (false !== strpos($rewrite, 'embed=true')) {\n             unset($rules[$rule]);\n         }\n     }\n     return $rules;\n }","priority":"10"}]}