{"generator":"Code Snippets v2.14.0","date_created":"2020-03-22 18:37","snippets":[{"name":"WooCommerce: Adds a custom order action in the Recent Orders table of the account","tags":["woocommerce","orders","accounts"],"scope":"front-end","code":"function wc_add_custom_file_order_action( $actions, $order ) {\n\t\/\/ only add our button if the order is paid for\n\t\/\/ if using WC 2.5+, can simplify this to: if ( ! $order->is_paid() )\n\tif ( ! ( $order->has_status( 'processing' ) || $order->has_status( 'completed' ) ) ) {\n\t\treturn $actions;\n\t}\n\t\n\t\/\/ add our action if the order has the custom_file field set\n\tif ( $file_id = (int) get_post_meta( $order->id, 'custom_file', true ) ) {\n\t\t$actions['files'] = array(\n\t\t\t'url'\t=> trailingslashit( get_site_url() ) . trailingslashit( get_option( 'dlm_download_endpoint' ) ) . $file_id,\n\t\t\t'name'\t=> __( 'Get Files', 'my-textdomain' ),\n\t\t);\n\t}\n\t\n\treturn $actions;\n}\nadd_filter( 'woocommerce_my_account_my_orders_actions', 'wc_add_custom_file_order_action', 10, 2 );","priority":"10"}]}